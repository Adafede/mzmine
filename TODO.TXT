
TODO list for MZmine 2.0 release


***** Optimization *****

* Reduce memory footprint

* Optimize the mass connector and mass detector algorithms for better speed

* Temporary files containing raw data could be memory-mapped (using FileChannel.map()) for better performance.

* Temporary files are (sometimes?) not removed after MZmine exits.
  Proposed solution: MZmine locks the files with FileLock. After exit, locks are automatically removed.
  When MZmine starts, it checks existing temp files and if they don't have a lock, it removes them.
  

***** Core modules *****

Project manager
* We need to reimplement project saving/loading using our own project file format. 
  Saving using serialization is too slow (2 hr saving a ~1 GB size project)
* Bug: projectParametersAndValues is indexed by String (filename), 
  but should be indexed by RawDataFile (Fixed 2009/3/6 Tomas)


Desktop
* ItemSelector should be replaced with a JTree which allows unfolding raw data 
  files into individual scans and peak lists into individual rows (Finished Tomas)
* JTree needs support for drag&drop reordering of data files/peak lists  (Tomas)

Task controller
* Tasks with high priority (e.g. visualization) should never wait and always 
  allocate a thread
* Number of simultaneously running threads should be set in a configuration dialog,
  not by editing config file
* TaskListener and TaskGroup classes are obsolete and should be removed

Batch mode
* It need to be redesigned. (Tomas)
* Bug: it can not be used again if during its running any process hasn't finished correctly. 


***** Raw data import *****

Recognition of centroid/continuous scans is not perfect. 
Control1.CDF scan 1027 is recognized as centroid which is not true.
(Implemented new utility (ScanUtils.isCentroided). 
Change applied to all raw data file importers 2009/2/3 Alex).

RAW file import using Thermo XCalibur DLL
* Raw file import is using too much memory. Memory is released when task is 
  finished, but importing one file may consume >500MB RAM during the process.
* Binding to XCalibur DLL doesn't work when MZmine is running 64-bit


***** Raw data filtering *****

These algorithms are almost unchanged since original MZmine 1.
We should think how they can be applied to high-resolution data. 
Probably we need to improve the algorithms.
We may also consider implementing some preview mechanism, similar
to peak detection.


***** Peak detection *****

Shape modeler
* Under testing by users 
(2009/2/2 Alex)

Peak recognition
* Add checkbox "remove original chromatogram"
(Done 2009/2/2 Alex)


***** Visualizers *****

2D visualizer
* Need to set threshold for how many peaks will be annotated (Sandra)
* Color scale should be editable, similar as color scale of RT/MZ plots
* Intensity scale is now relative to the zoomed area. There should be a 
  setting to make it absolute (e.g. when comparing two files)

3D visualizer
* Need to set threshold for how many peaks will be annotated
* There should be a setting for the intensity scale (e.g. when comparing
  two files)
* There should be a switch whether missing points in the grid should be
  approximated - makes sense only for continuous mode when looking in high
  detail


Peak list table
* Combined XIC component should have a nicer tooltip showing which color is 
  which data file
(Done 2009/2/4 Alex)
* PeakSummaryComponent may be integrated into the tooltip
(Done 2009/2/4 Alex)

Scatter plot
* Currently user can search only for compound name, but should also be able
  to search by mass/RT
  (Done 2009/2/3 Alex)
* Bug: Typing invalid regular expression in the search box will cause an
  exception. 
  (Fixed 2009/2/2 Alex)


Isotope pattern visualizer
* Bug: Show...isotope pattern invoked from peak list table doesn't highlight isotopes
(Fixed 2009/2/2 Alex)

TIC/XIC visualizer
* Visualizer should be able to show several peaks from one peaklist column 
  and allow a selection of data files to be shown
* When showing a particular peak, the dialog should offer "smarter" retention
  time range, same as 3D visualizer
* Bug: NullPointerException when TIC visualizer setup dialog is opening. (ParameterSetupDialog.java:303)

Spectra visualizer
* Bug: sometimes fragment scans are shown twice in MS/MS combo
(Fixed 2009/2/2 Alex, Really fixed 2009/2/26 Tomas)

Peak list row summary visualizer (new)
* We should implement a new simple visualizer "Peak list row summary" with
  easy binding to all other visualizers and manual peak detection. This visualizer 
  can integrate the PeakSummaryComponent.
(Done 2009/2/4 Alex)


***** Normalization *****

NOMIS method?


***** Identification *****

Related peaks search
* This module should perhaps be split into several modules for adduct search, 
  fragments search (using MS/MS), dimers etc. (Tomas)

Custom database search
* Bug: the identification assigned to one peak changes to another peak when
 one of the names is selected and the peak list is sorted. This selected identification 
 doesn't change its position in the list when it is sorted.


***** Data analysis *****

RT/mz plots
* Color axis needs more informative title - instead of "Logratio" it should say 
  e.g. "log2(avg peak area(file1, file2) / avg peak area (file3, file4))"

PCA plot
* Bug: PCA plot may freeze if data contains Double.NaN




***** Documentation *****

Write documentation for the new code
* Comments in critical parts of the code (algorithms)
* Help files
* User's manual.
